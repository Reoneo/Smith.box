<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hidden-Text Viewer</title>
  <style>
    body { font-family: sans-serif; margin: 1rem; }
    #output { border: 1px solid #ccc; padding: 1rem; margin-top: 1rem; white-space: pre-wrap; }
    label, input, button { font-size: 1rem; }
  </style>
</head>
<body>
  <label>Page URL: <input type="text" id="url" size="50" placeholder="https://example.com"></label>
  <button id="load">Load + Reveal</button>
  <div id="output"></div>

  <script>
    document.getElementById('load').addEventListener('click', async () => {
      const url = document.getElementById('url').value.trim();
      if (!url) return alert('Enter a URL');
      // Use a CORS-free proxy like allorigins
      const proxy = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);
      let html;
      try {
        const resp = await fetch(proxy);
        html = await resp.text();
      } catch (e) {
        return document.getElementById('output').textContent = '❌ Fetch failed: ' + e;
      }

      // Parse and strip hiding
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');
      doc.querySelectorAll('*').forEach(el => {
        const s = getComputedStyle(el);
        if (s.display === 'none' || s.visibility === 'hidden' || el.hidden || el.classList.contains('hidden')) {
          el.style.display    = 'block';
          el.style.visibility = 'visible';
          el.hidden = false;
        }
      });

      // Serialize only the body’s text
      const text = doc.body.innerText;
      document.getElementById('output').textContent = text;
    });
  </script>
</body>
</html>